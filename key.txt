--[[
    üõ°Ô∏è SHIELD SECURITY SYSTEM v3.1 (Passive Mode)
    - Session Token Locking (Tetap Aktif)
    - GUI Detection (Aktif - Kick jika spy tool DIBUKA)
    - Env Detection (Dimatikan - Agar tidak kick executor normal)
]]

local _SEC_TOKEN = getgenv()._SHIELD_SESSION_KEY
local _SEC_TIMESTAMP = getgenv()._SHIELD_TIMESTAMP or 0

-- Bersihkan jejak token
if getgenv()._SHIELD_SESSION_KEY then
    getgenv()._SHIELD_SESSION_KEY = nil
    getgenv()._SHIELD_TIMESTAMP = nil
end

-- Kick Function
local function _SECURITY_KICK(reason)
    pcall(function()
        game:GetService("Players").LocalPlayer:Kick("‚õî " .. tostring(reason))
    end)
    while true do task.wait(9e9) end
end

-- 1. Cek Token (Wajib ada)
if not _SEC_TOKEN then
    _SECURITY_KICK("Security Violation: Script executed manually (No Session Token).")
    return
end

--[[ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     PASSIVE ANTI-SPY (HANYA DETEKSI GUI)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ]]

local SPY_GUI_NAMES = {
    "simplespy", "simple_spy", "remotespy", "remote_spy",
    "httpspy", "http_spy", "dexexplorer", "dex", "darkdex",
    "infiniteyield", "hydroxide", "scriptdumper", "unluac",
    "jobid", "rejoin", "explorer" -- Kata kunci umum tool cheat
}

local function CheckGUI(child)
    if not child then return end
    if child:IsA("ScreenGui") or child:IsA("BillboardGui") then
        local name = string.lower(child.Name)
        -- Cek nama GUI
        for _, spy in ipairs(SPY_GUI_NAMES) do
            if name:find(spy) then
                _SECURITY_KICK("Spy Tool Detected: " .. child.Name)
                return true
            end
        end
        
        -- Deep scan (Cek isi GUI untuk teks mencurigakan)
        -- Ini hanya jalan jika GUI baru muncul, tidak scan terus menerus (biar gak lag)
        task.spawn(function()
            local suspicious_score = 0
            for _, desc in ipairs(child:GetDescendants()) do
                if desc:IsA("TextLabel") or desc:IsA("TextButton") then
                    local text = string.lower(desc.Text)
                    if text:find("remote") and text:find("spy") then suspicious_score = suspicious_score + 1 end
                    if text:find("function") and text:find("hook") then suspicious_score = suspicious_score + 1 end
                    if text:find("saveinstance") then suspicious_score = suspicious_score + 1 end
                end
            end
            if suspicious_score >= 2 then
                _SECURITY_KICK("Spy Tool Detected (Content Scan): " .. child.Name)
            end
        end)
    end
end

-- Monitor CoreGui (Tempat tool spy biasanya muncul)
local CG = game:GetService("CoreGui")
CG.ChildAdded:Connect(CheckGUI)

-- Scan awal (siapa tau spy sudah nyala duluan)
for _, c in ipairs(CG:GetChildren()) do CheckGUI(c) end

--[[ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     CORE SCRIPT ASLI (KEY SYSTEM)
     Code kamu yang lama ada di bawah ini
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ]]

local P=game:GetService("Players")
local LP=P.LocalPlayer
local SG=game:GetService("StarterGui")
local CG=game:GetService("CoreGui")
local HS=game:GetService("HttpService")
local TS=game:GetService("TweenService")
local GID=93978595733734
-- (Daftar executor blacklist saya hapus agar lebih aman dan tidak conflict)
local AE={"delta"} -- Whitelist executor (Opsional)

-- CONFIG
local CFG={
    HL="https://pastebin.com/raw/u4kzwdEX", -- Script Loader setelah Key
    MA=3,
    SF="ToingDc",
    SFL="KeyData.json",
    WA="https://work.ink/_api/v2/token/isValid/",
    GK="https://work.ink/29pu/key-sistem-3"
}
local FA=0

local function SN(t,x,d)pcall(function()SG:SetCore("SendNotification",{Title=t,Text=x,Duration=d or 3})end)end
local function KP(r)task.wait(1)LP:Kick(r)end

-- CEK EXECUTOR (Sederhana saja)
local function GEN()
    local n="Unknown"
    pcall(function()
        if identifyexecutor then local a=identifyexecutor() if a then n=tostring(a) end end
    end)
    return n
end

-- CEK GAME ID
if game.PlaceId~=GID then 
    SN("‚õî Wrong Game","Script ini hanya untuk Violence District!",3)
    -- KP("‚õî WRONG GAME") -- Uncomment jika ingin auto kick
    -- return -- Uncomment jika ingin stop
end

-- KEY SYSTEM LOGIC (Original)
local function SK(k)pcall(function()if not isfolder(CFG.SF)then makefolder(CFG.SF)end writefile(CFG.SF.."/"..CFG.SFL,HS:JSONEncode({key=k,savedAt=os.time()}))end)end
local function LK()local s,d=pcall(function()if isfile(CFG.SF.."/"..CFG.SFL)then return HS:JSONDecode(readfile(CFG.SF.."/"..CFG.SFL))end return nil end)return s and d or nil end
local function DK()pcall(function()if isfile(CFG.SF.."/"..CFG.SFL)then delfile(CFG.SF.."/"..CFG.SFL)end end)end
local function VK(k)if not k or type(k)~="string"or #k<5 then return{valid=false,serverReachable=true,message="Key terlalu pendek"}end k=k:gsub("%s+","")local rf=request or http_request or(syn and syn.request)or(http and http.request)if not rf then return{valid=false,serverReachable=false,message="HTTP tidak tersedia"}end local s,r=pcall(function()return rf({Url=CFG.WA..k,Method="GET"})end)if s and r then if r.StatusCode==200 then local ps,pd=pcall(function()return HS:JSONDecode(r.Body)end)if ps and pd then if pd.valid==true then return{valid=true,serverReachable=true}else return{valid=false,serverReachable=true,message="Key tidak valid atau expired"}end else if r.Body and r.Body:lower():find("true")then return{valid=true,serverReachable=true}end return{valid=false,serverReachable=true,message="Response tidak valid"}end elseif r.StatusCode==404 then return{valid=false,serverReachable=true,message="Key tidak ditemukan"}elseif r.StatusCode==401 or r.StatusCode==403 then return{valid=false,serverReachable=true,message="Key ditolak"}elseif r.StatusCode>=500 then return{valid=false,serverReachable=false,message="Server error"}else return{valid=false,serverReachable=true,message="Error: "..tostring(r.StatusCode)}end end return{valid=false,serverReachable=false,message="Tidak bisa konek ke server"}end
local function CSK()local sd=LK()if sd and sd.key then local rs=VK(sd.key)if rs.valid==true then return true elseif rs.serverReachable==true then DK()SN("‚ö†Ô∏è Key Expired","Key tersimpan tidak valid, masukkan key baru",4)return false else SN("‚ö†Ô∏è Offline Mode","Server tidak bisa dihubungi",3)return true end end return false end

local SGui=Instance.new("ScreenGui")SGui.Name="ToingDc_KeySystem"SGui.ResetOnSpawn=false SGui.Parent=CG
if CSK()then SGui:Destroy()pcall(function()loadstring(game:HttpGet(CFG.HL))()end)return end

local function KPK(r)pcall(function()SGui:Destroy()end)LP:Kick(r)end
local function GR()return CFG.MA-FA end

-- GUI ELEMENTS (Minified)
local M=Instance.new("Frame")M.Parent=SGui M.BackgroundColor3=Color3.fromRGB(13,13,13)M.Position=UDim2.new(0.5,-180,0.5,-110)M.Size=UDim2.new(0,360,0,220)Instance.new("UICorner",M).CornerRadius=UDim.new(0,28)Instance.new("UIStroke",M).Color=Color3.fromRGB(30,30,30)
local T=Instance.new("TextLabel")T.Parent=M T.Text="ToingDc"T.Font=Enum.Font.GothamBlack T.TextColor3=Color3.fromRGB(255,255,255)T.TextSize=24 T.Position=UDim2.new(0,22,0,22)T.Size=UDim2.new(0,200,0,30)T.BackgroundTransparency=1 T.TextXAlignment=Enum.TextXAlignment.Left
local ST=Instance.new("TextLabel")ST.Parent=M ST.Text="masukin key kocak"ST.Font=Enum.Font.GothamMedium ST.TextColor3=Color3.fromRGB(120,120,120)ST.TextSize=14 ST.Position=UDim2.new(0,22,0,52)ST.Size=UDim2.new(0,200,0,20)ST.BackgroundTransparency=1 ST.TextXAlignment=Enum.TextXAlignment.Left
local AF=Instance.new("Frame")AF.Parent=M AF.BackgroundColor3=Color3.fromRGB(25,35,30)AF.Position=UDim2.new(1,-65,0,22)AF.Size=UDim2.new(0,50,0,28)Instance.new("UICorner",AF).CornerRadius=UDim.new(0,10)
local AL=Instance.new("TextLabel")AL.Parent=AF AL.Text=GR().."/"..CFG.MA AL.Font=Enum.Font.GothamBold AL.TextColor3=Color3.fromRGB(100,200,140)AL.TextSize=13 AL.Size=UDim2.new(1,0,1,0)AL.BackgroundTransparency=1
local SS=Instance.new("TextLabel")SS.Parent=M SS.Text=""SS.Font=Enum.Font.GothamMedium SS.TextColor3=Color3.fromRGB(100,200,255)SS.TextSize=11 SS.Position=UDim2.new(0,22,0,74)SS.Size=UDim2.new(1,-44,0,16)SS.BackgroundTransparency=1 SS.TextXAlignment=Enum.TextXAlignment.Left
local IF=Instance.new("Frame")IF.Parent=M IF.BackgroundColor3=Color3.fromRGB(22,22,22)IF.Position=UDim2.new(0,18,0,98)IF.Size=UDim2.new(1,-36,0,52)Instance.new("UICorner",IF).CornerRadius=UDim.new(0,14)
local IS=Instance.new("UIStroke",IF)IS.Color=Color3.fromRGB(38,38,38)
local KL=Instance.new("TextLabel")KL.Parent=IF KL.Text="KEY"KL.Font=Enum.Font.GothamBold KL.TextColor3=Color3.fromRGB(70,70,75)KL.TextSize=10 KL.Position=UDim2.new(0,16,0.5,-7)KL.Size=UDim2.new(0,30,0,14)KL.BackgroundTransparency=1
local SP=Instance.new("Frame")SP.Parent=IF SP.BackgroundColor3=Color3.fromRGB(45,45,50)SP.BorderSizePixel=0 SP.Position=UDim2.new(0,52,0.25,0)SP.Size=UDim2.new(0,1,0.5,0)
local KI=Instance.new("TextBox")KI.Parent=IF KI.BackgroundTransparency=1 KI.Position=UDim2.new(0,62,0,0)KI.Size=UDim2.new(1,-72,1,0)KI.PlaceholderText="Paste your license key here..."KI.PlaceholderColor3=Color3.fromRGB(80,80,85)KI.Text=""KI.TextColor3=Color3.fromRGB(255,255,255)KI.Font=Enum.Font.GothamMedium KI.TextSize=13 KI.TextXAlignment=Enum.TextXAlignment.Left KI.ClearTextOnFocus=false
local BF=Instance.new("Frame")BF.Parent=M BF.BackgroundTransparency=1 BF.Position=UDim2.new(0,18,0,165)BF.Size=UDim2.new(1,-36,0,42)
local EX=Instance.new("TextButton")EX.Parent=BF EX.BackgroundColor3=Color3.fromRGB(32,26,28)EX.Position=UDim2.new(0,0,0,0)EX.Size=UDim2.new(0,70,1,0)EX.Text="Exit"EX.TextColor3=Color3.fromRGB(200,120,120)EX.Font=Enum.Font.GothamBold EX.TextSize=14 EX.AutoButtonColor=false Instance.new("UICorner",EX).CornerRadius=UDim.new(0,12)
local GK=Instance.new("TextButton")GK.Parent=BF GK.BackgroundColor3=Color3.fromRGB(28,28,32)GK.Position=UDim2.new(0,80,0,0)GK.Size=UDim2.new(0,100,1,0)GK.Text="Get Key"GK.TextColor3=Color3.fromRGB(130,170,255)GK.Font=Enum.Font.GothamBold GK.TextSize=14 GK.AutoButtonColor=false Instance.new("UICorner",GK).CornerRadius=UDim.new(0,12)
local SB=Instance.new("TextButton")SB.Parent=BF SB.BackgroundColor3=Color3.fromRGB(30,45,38)SB.Position=UDim2.new(0,190,0,0)SB.Size=UDim2.new(1,-190,1,0)SB.Text="Submit"SB.TextColor3=Color3.fromRGB(120,220,160)SB.Font=Enum.Font.GothamBold SB.TextSize=14 SB.AutoButtonColor=false Instance.new("UICorner",SB).CornerRadius=UDim.new(0,12)

local function UUI()AL.Text=GR().."/"..CFG.MA local r=GR()if r==3 then AL.TextColor3=Color3.fromRGB(100,200,140)AF.BackgroundColor3=Color3.fromRGB(25,35,30)elseif r==2 then AL.TextColor3=Color3.fromRGB(255,200,100)AF.BackgroundColor3=Color3.fromRGB(40,35,25)else AL.TextColor3=Color3.fromRGB(255,100,100)AF.BackgroundColor3=Color3.fromRGB(40,28,28)end end
local function SHI()local p=IF.Position for _=1,4 do TS:Create(IF,TweenInfo.new(0.035),{Position=p+UDim2.new(0,5,0,0)}):Play()task.wait(0.035)TS:Create(IF,TweenInfo.new(0.035),{Position=p+UDim2.new(0,-5,0,0)}):Play()task.wait(0.035)end TS:Create(IF,TweenInfo.new(0.035),{Position=p}):Play()end
local function AH(b,n,h)b.MouseEnter:Connect(function()TS:Create(b,TweenInfo.new(0.12),{BackgroundColor3=h}):Play()end)b.MouseLeave:Connect(function()TS:Create(b,TweenInfo.new(0.12),{BackgroundColor3=n}):Play()end)end
AH(EX,Color3.fromRGB(32,26,28),Color3.fromRGB(50,35,38))AH(GK,Color3.fromRGB(28,28,32),Color3.fromRGB(38,38,45))AH(SB,Color3.fromRGB(30,45,38),Color3.fromRGB(40,60,50))
KI.Focused:Connect(function()TS:Create(IS,TweenInfo.new(0.2),{Color=Color3.fromRGB(80,120,180)}):Play()end)
KI.FocusLost:Connect(function()TS:Create(IS,TweenInfo.new(0.2),{Color=Color3.fromRGB(38,38,38)}):Play()end)
EX.MouseButton1Click:Connect(function()KPK("masukin key kocak")end)
GK.MouseButton1Click:Connect(function()if setclipboard then setclipboard(CFG.GK)SS.Text="Link copied!"SS.TextColor3=Color3.fromRGB(100,180,255)end SN("ToingDc","Key link copied!",4)end)
local IV=false
SB.MouseButton1Click:Connect(function()if IV then return end local k=KI.Text:gsub("%s+","")if k==""then SS.Text="Key tidak boleh kosong!"SS.TextColor3=Color3.fromRGB(255,100,100)SHI()return end IV=true SS.Text="Validating..."SS.TextColor3=Color3.fromRGB(255,200,100)task.wait(0.5)local rs=VK(k)IV=false if rs.valid==true then SS.Text="‚úÖ Key valid! Loading..."SS.TextColor3=Color3.fromRGB(100,255,140)SK(k)task.wait(1)SGui:Destroy()pcall(function()loadstring(game:HttpGet(CFG.HL))()end)elseif rs.serverReachable==false then SS.Text="‚ö†Ô∏è "..rs.message SS.TextColor3=Color3.fromRGB(255,180,100)SHI()else FA=FA+1 UUI()SHI()local rm=GR()if rm<=0 then SS.Text="‚ùå Key salah 3x!"task.wait(1.5)KPK("masukin key kocak")else SS.Text="‚ùå "..rs.message.." | Sisa: "..rm SS.TextColor3=Color3.fromRGB(255,100,100)end end end)
UUI()
